<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø§Ø¯Ø©</title>
    <link rel="stylesheet" href="Style.css">
    <link href="https://fonts.googleapis.com/css?family=Cairo&display=swap" rel="stylesheet">
</head>
<body>
    <div class="student-header">
        <button class="sidebar-toggle" id="sidebarToggle" title="Ø¥ØºÙ„Ø§Ù‚/ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©">&#9776;</button>
        <div class="student-header-left">
            <span class="student-title">Ø¯Ø±ÙˆØ³ Ø§Ù„Ù…Ø§Ø¯Ø©</span>
        </div>
        <div class="student-header-right">
            <span class="student-user">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø§Ù„Ø·Ø§Ù„Ø¨</span>
            <button class="logout-btn">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>
    <div id="sidebar-overlay" class="sidebar-overlay"></div>
    <div class="student-sidebar">
        <h2 class="sidebar-title">Ù…Ø¯Ø§Ø±ÙÙƒ</h2>
        <button class="sidebar-toggle sidebar-toggle-inside" id="sidebarToggleInside" title="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" style="display:none">&#10005;</button>
        <ul>
            <li><a href="StudentDashboard.html" id="dashboard-link"><span class="icon">ğŸ </span> Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª </a></li>
            <li><a href="Student_Lessons.html" id="courses-link"><span class="icon">ğŸ“š</span> Ø¯Ø±ÙˆØ³ÙŠ </a></li>
            <li><a href="Student_Homework.html" id="assignments-link"><span class="icon">ğŸ“</span> ÙˆØ§Ø¬Ø¨Ø§ØªÙŠ </a></li>
            <li><a href="Student_Grades.html" id="grades-link"><span class="icon">ğŸ“Š</span> Ø¯Ø±Ø¬Ø§ØªÙŠ</a></li>
            <li><a href="Student_Attendance.html" id="attendance-link"><span class="icon">ğŸ“…</span> Ø§Ù„Ø­Ø¶ÙˆØ±</a></li>
            <li><a href="Student_Courses.html" id="courses-link"><span class="icon">ğŸ‘¨â€ğŸ«</span> Ø§Ù„Ø¯ÙˆØ±Ø§Øª </a></li>
        </ul>
    </div>
    <div class="student-main" id="student-main-content">
        <div class="lessons-header">
            <span class="lessons-icon" id="subject-icon">ğŸ“š</span>
            <span class="lessons-title" id="subject-title">Ø§Ù„Ù…Ø§Ø¯Ø©</span>
        </div>
        <div class="lessons-list" id="subject-lessons-list"></div>
    </div>
    <script>
    // Ù†ÙØ³ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±ÙˆØ³ ÙˆØ§Ù„Ù…ÙˆØ§Ø¯
    // Ø¥Ø¶Ø§ÙØ© Ø¯Ø±ÙˆØ³ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
const lessonsData = [
    { id: 1, subject: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", title: "Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ø®Ø·ÙŠØ©", date: "2025-05-20", completed: false, type: 'pdf', url: 'linear-equations.pdf' },
    { id: 9, subject: "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", title: "Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠØ© (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'pdf', url: 'quadratic-functions.pdf' },
    { id: 2, subject: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", title: "Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø£Ø¯Ø¨ÙŠØ© (ÙÙŠØ¯ÙŠÙˆ)", date: "2025-05-18", completed: true, type: 'video', url: 'arabic-poetry.mp4' },
    { id: 10, subject: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", title: "Ø§Ù„Ø¥Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„ØªØ±Ù‚ÙŠÙ… (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'text', content: 'Ø´Ø±Ø­ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¥Ù…Ù„Ø§Ø¡ ÙˆØ¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ±Ù‚ÙŠÙ… ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©.' },
    { id: 3, subject: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", title: "Grammar Basics (Ù†Øµ)", date: "2025-05-10", completed: false, type: 'text', content: 'Ø´Ø±Ø­ Ù…Ø¨Ø³Ø· Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø§Ø³Ù…ÙŠØ© ÙˆØ§Ù„ÙØ¹Ù„ÙŠØ©ØŒ Ø§Ù„Ø£Ø²Ù…Ù†Ø©ØŒ ÙˆØ£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØµØ­ÙŠØ­.' },
    { id: 11, subject: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", title: "Reading Skills (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'text', content: 'Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„ÙÙ‡Ù… ÙÙŠ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©.' },
    { id: 4, subject: "Ø§Ù„Ø¹Ù„ÙˆÙ…", title: "Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ (ØµÙˆØ±Ø©)", date: "2025-05-14", completed: true, type: 'image', url: 'digestive-system.png' },
    { id: 12, subject: "Ø§Ù„Ø¹Ù„ÙˆÙ…", title: "Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ£Ù†ÙˆØ§Ø¹Ù‡Ø§ (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'pdf', url: 'energy-types.pdf' },
    { id: 5, subject: "Ø§Ù„Ø­Ø§Ø³ÙˆØ¨", title: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© (PDF)", date: "2025-05-05", completed: false, type: 'pdf', url: 'programming-intro.pdf' },
    { id: 13, subject: "Ø§Ù„Ø­Ø§Ø³ÙˆØ¨", title: "Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'text', content: 'Ù…Ù‚Ø¯Ù…Ø© Ø­ÙˆÙ„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ¨Ù†ÙŠØªÙ‡ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©.' },
    { id: 6, subject: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ù„Ø§Ù…ÙŠØ©", title: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø© (ÙÙŠØ¯ÙŠÙˆ)", date: "2025-05-21", completed: false, type: 'video', url: 'alfatiha.mp4' },
    { id: 14, subject: "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ù„Ø§Ù…ÙŠØ©", title: "Ø§Ù„Ø·Ù‡Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'text', content: 'Ø´Ø±Ø­ Ù…Ø¨Ø³Ø· Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø·Ù‡Ø§Ø±Ø© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù….' },
    { id: 7, subject: "Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§", title: "Ø§Ù„Ù…Ù†Ø§Ø® ÙˆØ§Ù„Ø·Ù‚Ø³ (Ù†Øµ)", date: "2025-05-19", completed: false, type: 'text', content: 'ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ù†Ø§Ø® ÙˆØ§Ù„Ø·Ù‚Ø³ØŒ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ†Ù‡Ù…Ø§ØŒ ÙˆØ£Ù‡Ù…ÙŠØ© Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø·Ù‚Ø³ ÙÙŠ Ø­ÙŠØ§ØªÙ†Ø§ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©.' },
    { id: 15, subject: "Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§", title: "Ø§Ù„Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø­ÙŠØ·Ø§Øª (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'pdf', url: 'continents-oceans.pdf' },
    { id: 8, subject: "Ø§Ù„ØªØ§Ø±ÙŠØ®", title: "Ø§Ù„Ø­Ø¶Ø§Ø±Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© (ØµÙˆØ±Ø©)", date: "2025-05-13", completed: true, type: 'image', url: 'islamic-civilization.png' },
    { id: 16, subject: "Ø§Ù„ØªØ§Ø±ÙŠØ®", title: "Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© (Ø¬Ø¯ÙŠØ¯)", date: "2025-05-22", completed: false, type: 'text', content: 'Ù…Ù‚Ø¯Ù…Ø© Ø¹Ù† Ø§Ù„Ø«ÙˆØ±Ø© Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© ÙˆØ£Ø«Ø±Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø§Ù„Ù….' }
];
    const subjectsMeta = {
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": { icon: "ğŸ§®", color: "#f7b731", bg: "#fffbe6" },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": { icon: "ğŸ“–", color: "#eb3b5a", bg: "#fff0f3" },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø£Ù†Ø¬Ù„ÙŠØ²ÙŠØ©": { icon: "ğŸ‡¬ğŸ‡§", color: "#3867d6", bg: "#eaf0ff" },
        "Ø§Ù„Ø¹Ù„ÙˆÙ…": { icon: "ğŸ”¬", color: "#20bf6b", bg: "#eafff3" },
        "Ø§Ù„Ø­Ø§Ø³ÙˆØ¨": { icon: "ğŸ’»", color: "#8854d0", bg: "#f3eaff" },
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø£Ø³Ù„Ø§Ù…ÙŠØ©": { icon: "ğŸ•Œ", color: "#0fb9b1", bg: "#e6fffa" },
        "Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§": { icon: "ğŸŒ", color: "#fd9644", bg: "#fff7e6" },
        "Ø§Ù„ØªØ§Ø±ÙŠØ®": { icon: "ğŸº", color: "#a55eea", bg: "#f7eaff" }
    };
    function isNewLesson(dateStr) {
        const today = new Date();
        const lessonDate = new Date(dateStr);
        const diffDays = (today - lessonDate) / (1000 * 60 * 60 * 24);
        return diffDays <= 7;
    }
    function renderSubjectLessons() {
        const subject = localStorage.getItem('selectedSubject');
        if (!subject) {
            document.getElementById('subject-title').textContent = 'Ø§Ù„Ù…Ø§Ø¯Ø©';
            document.getElementById('subject-lessons-list').innerHTML = '<div class="no-lessons">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø©</div>';
            return;
        }
        document.getElementById('subject-title').textContent = subject;
        document.getElementById('subject-icon').textContent = subjectsMeta[subject]?.icon || 'ğŸ“š';
        const lessons = lessonsData.filter(l => l.subject === subject).sort((a,b)=>new Date(b.date)-new Date(a.date));
        if (!lessons.length) {
            document.getElementById('subject-lessons-list').innerHTML = '<div class="no-lessons">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø§Ø¯Ø©</div>';
            return;
        }
        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¯Ø±ÙˆØ³: Ø§Ù„Ø£Ø­Ø¯Ø« ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ØŒ Ø§Ù„Ø£Ù‚Ø¯Ù… ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„
        // ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø¬Ø¯ÙŠØ¯ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø¯Ø±Ø³
        const latestLessonId = lessons[0].id;
        document.getElementById('subject-lessons-list').innerHTML = `
            <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;">
                ${lessons.map(lesson => lessonCard({...lesson, isLatest: lesson.id === latestLessonId})).join('')}
            </div>
        `;
    }
    function lessonCard(lesson) {
        return `<div class="lesson-card${lesson.isLatest ? ' lesson-new' : ''}" style="margin-bottom:1.2rem;">
            <div class="lesson-card-header">
                <span class="lesson-subject">${lesson.subject}</span>
                ${lesson.isLatest ? '<span class="lesson-badge">Ø¬Ø¯ÙŠØ¯</span>' : ''}
            </div>
            <div class="lesson-title">${lesson.title}</div>
            <div class="lesson-date">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: ${lesson.date}</div>
            <div class="lesson-status">${lesson.completed ? 'Ù…ÙƒØªÙ…Ù„ âœ…' : 'ØºÙŠØ± Ù…ÙƒØªÙ…Ù„ âŒ'}</div>
            <button class="lesson-btn" onclick="showLessonModal(${lesson.id})">${lesson.isLatest ? 'Ù…Ø´Ø§Ù‡Ø¯Ø©' : 'Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„'}</button>
        </div>`;
    }
    // Ù†Ø§ÙØ°Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø³ (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
    function showLessonModal(id) {
        const lesson = lessonsData.find(l => l.id === id);
        let content = '';
        if (!lesson) return;
        if (lesson.type === 'pdf') {
            content = `<iframe src="${lesson.url}" width="100%" height="500px" style="border:none;"></iframe>`;
        } else if (lesson.type === 'video') {
            content = `<video width="100%" height="360" controls><source src="${lesson.url}" type="video/mp4">ÙÙŠØ¯ÙŠÙˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…</video>`;
        } else if (lesson.type === 'text') {
            content = `<div style="padding:1.5rem; font-size:1.1rem; color:#222; text-align:right;">${lesson.content}</div>`;
        } else if (lesson.type === 'image') {
            content = `<img src="${lesson.url}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¯Ø±Ø³" style="max-width:100%; max-height:400px; display:block; margin:auto; border-radius:12px; box-shadow:0 2px 12px #43cea244;">`;
        }
        const modalHtml = `
        <div class="lesson-modal-overlay" onclick="closeLessonModal(event)"></div>
        <div class="lesson-modal-box">
            <div class="lesson-modal-header">
                <span>${lesson.title}</span>
                <button class="lesson-modal-close" onclick="closeLessonModal(event)">&times;</button>
            </div>
            <div class="lesson-modal-content">${content}</div>
        </div>`;
        let modal = document.createElement('div');
        modal.id = 'lesson-modal';
        modal.innerHTML = modalHtml;
        document.body.appendChild(modal);
        setTimeout(() => {modal.classList.add('show');}, 10);
    }
    function closeLessonModal(e) {
        if (e) e.stopPropagation();
        const modal = document.getElementById('lesson-modal');
        if (modal) modal.remove();
    }
    // Ø¥ØµÙ„Ø§Ø­ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø³Ø§ÙŠØ¯Ø¨Ø§Ø± Ù„Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨
    function setupSidebarToggle() {
        const sidebar = document.querySelector('.student-sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const header = document.querySelector('.student-header');
        const main = document.querySelector('.student-main');
        const toggle = document.getElementById('sidebarToggle');
        const toggleInside = document.getElementById('sidebarToggleInside');
        function openSidebarMobile() {
            sidebar.classList.add('sidebar-open');
            if (overlay) overlay.classList.add('active');
            if (toggleInside) toggleInside.style.display = 'flex';
        }
        function closeSidebarMobile() {
            sidebar.classList.remove('sidebar-open');
            if (overlay) overlay.classList.remove('active');
            if (toggleInside) toggleInside.style.display = 'none';
        }
        function toggleSidebarDesktop() {
            sidebar.classList.toggle('sidebar-collapsed');
            if (header) header.classList.toggle('sidebar-collapsed');
            if (toggle) toggle.classList.toggle('sidebar-collapsed');
            if (main) main.classList.toggle('sidebar-collapsed');
        }
        if (toggle) {
            toggle.onclick = function(e) {
                e.stopPropagation();
                if (window.innerWidth <= 700) {
                    if (sidebar.classList.contains('sidebar-open')) {
                        closeSidebarMobile();
                    } else {
                        openSidebarMobile();
                    }
                } else {
                    toggleSidebarDesktop();
                }
            };
        }
        if (toggleInside) {
            toggleInside.onclick = function(e) {
                e.stopPropagation();
                closeSidebarMobile();
            };
        }
        if (overlay) {
            overlay.onclick = function() {
                closeSidebarMobile();
            };
        }
        window.addEventListener('resize', function() {
            if (window.innerWidth > 700) {
                closeSidebarMobile();
            } else {
                sidebar.classList.remove('sidebar-collapsed');
                if (header) header.classList.remove('sidebar-collapsed');
                if (toggle) toggle.classList.remove('sidebar-collapsed');
                if (main) main.classList.remove('sidebar-collapsed');
                if (toggleInside) toggleInside.style.display = 'none';
            }
        });
    }
    document.addEventListener('DOMContentLoaded', function() {
        renderSubjectLessons();
        setupSidebarToggle();
    });
    </script>
</body>
</html>
